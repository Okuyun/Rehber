<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>finder</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <!-- Source: http://www.arabic-keyboard.org/keyboard/ -->
    <link rel="stylesheet" type="text/css" href="style/keyboard.css" />
    <script
      type="text/javascript"
      src="code/keyboard.js"
      charset="UTF-8"
    ></script>

    <style>
      .arabic {
        font: 20px me_quran, serif;
      }
      .container {
        max-width: 95vw;
      }
      @font-face {
        font-family: me_quran;
        src: url("style/me_quran.ttf");
      }

      great {
        cursor: pointer;
        background-color: yellow;
        color: black;
      }
      .translation {
        font-size: 17px;
      }
      .tableTranslation {
        display: table-cell;
      }
      .fullText{
        display: table-cell;
      }
      .shrinkArabic{
        display: none;
      }
    </style>
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="images/search.png">
  </head>

  <body>
    <!-- from bootstrap examples  -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="#">Bahis Qurani</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#"
              >Finder <span class="sr-only">(current)</span></a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#" aria-disabled="true"
              >Reader</a
            >
          </li>
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="navbarDropdown"
              role="button"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="false"
            >
              Other
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Proposal</a>
              <a class="dropdown-item" href="#">Source Code</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">About me</a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
    <br />

    <div class="container">
      <div class="row bg-white sticky-top">
        <div class="input-group">
           <input
 dir="rtl"
 list="suggestions"
 style="max-width: 80vw;"
 class="arabic form-control text-right" 
 
 value="بسم الله"
 onchange="sugOnKeyUp(searchQue.value)"
 onkeyup="sugOnKeyUp(searchQue.value)"
 id="searchQue"
 type="text"
 aria-label="Search"
/>
          <div class="input-group-append" id="button-addon4">
            <button
            data-toggle="modal" 
            data-target="#settingsModel"
            class="btn btn-outline-success"
            type="submit"
          >
          ⚙️
          </button>
          <button
          data-toggle="modal"
          data-target="#speechSettings"
          class="btn btn-outline-success"
          type="submit"
        >
        🎤
        </button>
          </div>
        </div>
        <div class="input-group" >
          <!-- class add input-group-text to change the colour... -->
 <!-- can change to text center, would not it be better? -->     
        <!-- //onclick="SearchVoice()" -->
          <datalist id="suggestions">
            <option value="بسم الله الرحمن"></option>
            <option value="بسم الله مجراها"></option>
          </datalist>
        </div>
        <!-- <div class=col> -->
         <div class="custom-control custom-radio custom-control-inline">
            <input onchange="displayState(1)" type="radio" id="state1" name="state" class="custom-control-input">
            <label class="custom-control-label" for="state1">Show all</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input onchange="displayState(2)"  type="radio" id="state2" name="state" class="custom-control-input">
            <label class="custom-control-label" for="state2">Only arabic</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input onchange="displayState(3)" type="radio" id="state3" name="state" class="custom-control-input">
            <label class="custom-control-label" for="state3">Only oneline</label>
          </div>
         
        
         <!-- </div> -->
        
      </div>
      <div class="row">
        <div class="col-12">
          <table id="dTable" class="table">
            <caption style=" caption-side:top;">
             <span id="wordNumber">3</span>
             <span id="txtWordFound">ayet</span>
            </caption>
            <thead>
              <tr>
                <th id="translationHeader" style="width: 47%;"  class="tableTranslation">
                  <div class="btn-group">
                    <button id="THtext" type="button" class="btn badge badge-white align-text-bottom dropdown-toggle dropdown-toggle-split translation" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Türkçe: Diyanet Meali
                    </button>
                    <div class="dropdown-menu">
                      <button class="dropdown-item" onclick="loadTransF(3)">Türkçe: Diyanet Meali</button>
                      <button class="dropdown-item" onclick="loadTransF(5)">Türkçe: Elmalılı Hamdi Yazır</button>
                      <button class="dropdown-item" onclick="loadTransF(6)">English: Abdullah Yusuf Ali</button>
                      <button class="dropdown-item" onclick="loadTransF(4)">English: Ahmed Ali</button>
                      <button class="dropdown-item" onclick="loadTransF(1)">تفسير الجلالين</button>
                      <button class="dropdown-item" onclick="loadTransF(2)">تفسير الميسر</button>

                    </div>
                  </div>
                </th>
                <th id="arabicHeader" style="width: 47%;" class="text-right">عربي
                <!-- TODO: implement tefsir source here as well, it will be helpful to compare. -->
                </th>
              </tr>
            </thead>
            <tbody><tr><td>
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('1:1')">Al-Faatiha 1:1</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('1:1')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('1:1')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('1:1')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('1:1')">Reader</button>
    </div>
  </div>
  &nbsp;&nbsp;<span class="translation">«بسم الله الرحمن الرحيم»</span></td><td scope="col" class="text-right"><span class="arabic"><great onclick="openIqra(`1:1`)">بسم الله</great> الرحمن الرحيم</span>&nbsp;&nbsp;
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('1:1')">الفاتحة 1:1</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('1:1')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('1:1')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('1:1')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('1:1')">Reader</button>
    </div>
  </div>
  </td></tr><tr><td>
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('11:41')">Hud 11:41</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('11:41')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('11:41')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('11:41')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('11:41')">Reader</button>
    </div>
  </div>
  &nbsp;&nbsp;<span class="translation">«وقال» نوح «اركبوا فيها بسم الله مجراها ومرساها» بفتح الميمين وضمهما مصدران أي جريها ورسوها أي منتهى سيرها «إن ربي لغفور رحيم» حيث لم يهلكنا.</span></td><td scope="col" class="text-right"><span class="arabic">وقال اركبوا فيها <great onclick="openIqra(`11:41`)">بسم الله</great> مجراها ومرساها إن ربي لغفور رحيم</span>&nbsp;&nbsp;
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('11:41')">هود 11:41</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('11:41')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('11:41')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('11:41')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('11:41')">Reader</button>
    </div>
  </div>
  </td></tr><tr><td>
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('27:30')">An-Naml 27:30</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('27:30')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('27:30')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('27:30')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('27:30')">Reader</button>
    </div>
  </div>
  &nbsp;&nbsp;<span class="translation">«إنه من سليمان وإنه» أي مضمونه «بسم الله الرحمن الرحيم».</span></td><td scope="col" class="text-right"><span class="arabic">إنه من سليمان وإنه <great onclick="openIqra(`27:30`)">بسم الله</great> الرحمن الرحيم</span>&nbsp;&nbsp;
      <!-- Example split danger button -->
  <div class="btn-group">
    <button type="button" class="btn badge badge-light align-text-bottom" onclick="lastOne('27:30')">النمل 27:30</button>
    <button type="button" class="btn badge badge-light align-text-bottom dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <span class="sr-only">Toggle Dropdown</span>
    </button>
    <div class="dropdown-menu">
      <button class="dropdown-item" onclick="openCorpus('27:30')">Corpus</button>
      <button class="dropdown-item" onclick="openQuran('27:30')">Quran</button>
      <button class="dropdown-item" onclick="openMeali('27:30')">Meali</button>
      <div class="dropdown-divider"></div>
      <button class="dropdown-item" onclick="openIqra('27:30')">Reader</button>
    </div>
  </div>
  </td></tr></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Modal Settings-->
  <div class="modal fade" id="settingsModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="settingsModelTitle">Preference</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
        <span id=fontAr>font size</span>
        <br>
        <div class="container input-group">
          <button type="button" class="btn" onclick="changeFont(`arabic`,5)">+🗚</button>
          <div class="btn">
            <p class="arabic input-form">
              <great>بِسْمِ ٱللَّهِ</great> ٱلرَّحْمَٰنِ ٱلرَّحِيمِ
            </p>
          </div>
          <button type="button" class="btn" onclick="changeFont(`arabic`,-5)">🗛-</button>
        </div>
      
        
        <br>
        <span id=txtTrans>Translation:</span>
        <br>
        <button type="button" class="btn" onclick="changeFont(`x`,5)">+🗚</button>
        <p class="translation">Rahman ve Rahim olan Allah'ın adıyla:</p>
        <button type="button" class="btn" onclick="changeFont(`x`,-5)">🗛-</button>

        <br>

      
        <label for="" id=markColour>  Mark Colour: </label> &nbsp;
        <input  type="color" class="form-control col-4" name="favcolor" value="#ffff00" onchange="changeColour(this.value)">
     
          <hr>
         
          <label for="">Action button</label>
          <hr>
     
          <!-- if you want to choose from multiple add only this keyword before class.. -->
         
          Tefsir cumbo box - how many times should it be
          pagination - for tefsir.
          <hr>
          <span id=txtLangs>Languages</span>
          <select id=langsValue onchange="language(this.value)" class="browser-default custom-select form-control">
            <option value="1" selected>TR</option>
            <option value="2">AR</option>
            <option value="3">EN</option>
          </select>
        </div>
        <div class="modal-footer">
          <button id=txtModelClose type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <!-- Modal Speech API-->
<div class="modal fade" id="speechSettings" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modelVoiceControl" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modelVoiceControl">Voice control</h5>
        <!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button> -->
      </div>
      <div class="modal-body">
        <center>
          <button id="btnArabic" type="button" class="btn btn-primary" onclick="SearchVoice(`ar-AR`)">Arabic</button>
          <button id="btnOtherLang" type="button" class="btn btn-primary" onclick="SearchVoice()" >Other Lang</button>
        </center>
      <hr>
      <center>
       
        <div id=loading hidden=true>
          <span id=loadText>listening</span>
          <br>
         
          <div class="spinner-border text-info" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
      </center>
      </div>
      <div class="modal-footer">
        <button id="btnClose" type="button" class="btn btn-secondary" data-dismiss="modal" onclick="speechCancel()">Cancel</button>
      </div>
    </div>
  </div>
</div>
  
  <script src="code/language.js"></script>
    <script src="code/common.js"></script>
    <script src="code/buckwalter.js"></script>
    <script src="code/finder.js"></script>
    <script src="code/quran-data.js"></script>
    <script src="code/quran-sura.js"></script>
    <script src="code/script.js"></script>
    <script>
    if ('serviceWorker' in navigator) {
      if (location.protocol.startsWith('http')) 
        navigator.serviceWorker.register('sw.js')
        .then(reg => { console.log('SW Registered', reg.scope) })
        .catch(alert)
    }
      window.name="finder";
      init().then(initFinder)
     
      //initFinder();
      //setTimeout(findAction, 250, 'بسم الله');
    //  setTimeout(initFinder, 250, "بسم الله");
    </script>
  </body>
</html>
<!-- TODO change and add the CSS for arabic shrink and full, Change the great thingy to make it based on Query
move to issues, heck emails.
Add SW, Write Thesis, Check Presentation, prepare tests (demo), 
follow up with old stuff, show semi.
approach one: go from shrink/fulltext by CSS 
Approach two: use wordlst without clearning the table. -->